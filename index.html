<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¸ä»¤éƒ¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â€” AI Management</title>
    <style>
        :root {
            --bg: #0d1117;
            --surface: #161b22;
            --surface-hover: #1c2129;
            --border: #30363d;
            --text: #e6edf3;
            --text-muted: #8b949e;
            --accent: #58a6ff;
            --green: #3fb950;
            --yellow: #d29922;
            --red: #f85149;
            --orange: #db6d28;
            --purple: #bc8cff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.5;
        }

        .header {
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header h1 {
            font-size: 18px;
            font-weight: 600;
        }

        .header-badge {
            background: var(--accent);
            color: var(--bg);
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .header-date {
            color: var(--text-muted);
            font-size: 14px;
        }

        .nav {
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: 0 24px;
            display: flex;
            gap: 0;
            overflow-x: auto;
        }

        .nav-tab {
            padding: 12px 16px;
            color: var(--text-muted);
            text-decoration: none;
            font-size: 14px;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            white-space: nowrap;
            transition: color 0.15s, border-color 0.15s;
        }

        .nav-tab:hover { color: var(--text); }
        .nav-tab.active {
            color: var(--text);
            border-bottom-color: var(--accent);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
        }

        .page { display: none; }
        .page.active { display: block; }

        .grid { display: grid; gap: 16px; }
        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .grid-4 { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }

        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
        }

        .card-title {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
        }

        .stat-sub {
            font-size: 13px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .status-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 6px;
        }

        .status-ok { background: var(--green); }
        .status-warn { background: var(--yellow); }
        .status-error { background: var(--red); }
        .status-inactive { background: var(--text-muted); }

        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .badge-green { background: rgba(63,185,80,0.15); color: var(--green); }
        .badge-yellow { background: rgba(210,153,34,0.15); color: var(--yellow); }
        .badge-red { background: rgba(248,81,73,0.15); color: var(--red); }
        .badge-blue { background: rgba(88,166,255,0.15); color: var(--accent); }
        .badge-purple { background: rgba(188,140,255,0.15); color: var(--purple); }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            text-align: left;
            padding: 10px 12px;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--border);
        }

        td {
            padding: 12px;
            font-size: 14px;
            border-bottom: 1px solid var(--border);
        }

        tr:last-child td { border-bottom: none; }
        tr:hover { background: var(--surface-hover); }

        .progress-bar {
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 4px;
        }

        .progress-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timeline-item {
            padding: 12px 16px;
            border-left: 2px solid var(--border);
            margin-left: 8px;
            position: relative;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -5px;
            top: 16px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent);
        }

        .timeline-time {
            font-size: 12px;
            color: var(--text-muted);
        }

        .timeline-content {
            font-size: 14px;
            margin-top: 2px;
        }

        .alert-banner {
            background: rgba(248,81,73,0.1);
            border: 1px solid rgba(248,81,73,0.3);
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .unit-card {
            cursor: pointer;
            transition: transform 0.15s, box-shadow 0.15s;
        }

        .unit-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .empty-state {
            text-align: center;
            padding: 48px 24px;
            color: var(--text-muted);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        @media (max-width: 768px) {
            .container { padding: 16px; }
            .grid-4 { grid-template-columns: 1fr 1fr; }
            .header { padding: 12px 16px; }
            .nav { padding: 0 16px; }
        }

        .data-source-note {
            font-size: 11px;
            color: var(--text-muted);
            text-align: right;
            margin-top: 8px;
        }

        .tag {
            display: inline-block;
            padding: 1px 6px;
            border-radius: 4px;
            font-size: 11px;
            background: var(--border);
            color: var(--text-muted);
            margin-left: 4px;
        }
    </style>
</head>
<body>

<div class="header">
    <div class="header-left">
        <h1>å¸ä»¤éƒ¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
        <span class="header-badge">AI Management</span>
    </div>
    <span class="header-date" id="header-date"></span>
</div>

<div class="nav" id="nav">
    <div class="nav-tab active" data-page="overview">å…¨ä½“æ¦‚æ³</div>
    <div class="nav-tab" data-page="units">ãƒ¦ãƒ‹ãƒƒãƒˆä¸€è¦§</div>
    <div class="nav-tab" data-page="unit-a">ãƒ¦ãƒ‹ãƒƒãƒˆA</div>
    <div class="nav-tab" data-page="comm">é€šä¿¡çŠ¶æ³</div>
    <div class="nav-tab" data-page="discussions">ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³</div>
    <div class="nav-tab" data-page="timeline">ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³</div>
</div>

<div class="container">

    <!-- ===== å…¨ä½“æ¦‚æ³ ===== -->
    <div class="page active" id="page-overview">

        <div id="alerts"></div>

        <div class="grid grid-4" style="margin-bottom:24px">
            <div class="card">
                <div class="card-title">ç·å…µåŠ›</div>
                <div class="stat-value" id="stat-total-members">â€”</div>
                <div class="stat-sub" id="stat-total-units">â€” ãƒ¦ãƒ‹ãƒƒãƒˆ</div>
            </div>
            <div class="card">
                <div class="card-title">ä»Šæ—¥ã®æ—¥å ±æå‡ºç‡</div>
                <div class="stat-value" id="stat-daily-rate">â€”%</div>
                <div class="progress-bar"><div class="progress-fill" id="bar-daily" style="width:0%;background:var(--green)"></div></div>
            </div>
            <div class="card">
                <div class="card-title">æœªå›ç­”ã®è³ªå•</div>
                <div class="stat-value" id="stat-open-questions">â€”</div>
                <div class="stat-sub">å›ç­”å¾…ã¡</div>
            </div>
            <div class="card">
                <div class="card-title">æœªå‡¦ç†ã®æŒ‡ç¤º</div>
                <div class="stat-value" id="stat-pending-directives">â€”</div>
                <div class="stat-sub">é…ä¿¡æ¸ˆã¿ãƒ»æœªå®Œäº†</div>
            </div>
        </div>

        <div class="grid grid-2">
            <div class="card">
                <div class="section-title">ãƒ¦ãƒ‹ãƒƒãƒˆåˆ¥çŠ¶æ³</div>
                <table>
                    <thead>
                        <tr>
                            <th>ãƒ¦ãƒ‹ãƒƒãƒˆ</th>
                            <th>ãƒªãƒ¼ãƒ€ãƒ¼</th>
                            <th>äººæ•°</th>
                            <th>æ—¥å ±</th>
                            <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                        </tr>
                    </thead>
                    <tbody id="table-units-overview"></tbody>
                </table>
            </div>
            <div class="card">
                <div class="section-title">æœ€æ–°ã®é€šä¿¡</div>
                <div id="recent-comm"></div>
            </div>
        </div>

    </div>

    <!-- ===== ãƒ¦ãƒ‹ãƒƒãƒˆä¸€è¦§ ===== -->
    <div class="page" id="page-units">
        <div class="section-title">å…¨ãƒ¦ãƒ‹ãƒƒãƒˆ</div>
        <div class="grid grid-2" id="unit-cards"></div>
    </div>

    <!-- ===== ãƒ¦ãƒ‹ãƒƒãƒˆA è©³ç´° ===== -->
    <div class="page" id="page-unit-a">
        <div class="section-title">ãƒ¦ãƒ‹ãƒƒãƒˆAï¼ˆé–‹ç™ºï¼‰<span class="tag">unit-hub-a</span></div>

        <div class="grid grid-4" style="margin-bottom:24px">
            <div class="card">
                <div class="card-title">ãƒ¡ãƒ³ãƒãƒ¼</div>
                <div class="stat-value" id="ua-members">â€”</div>
            </div>
            <div class="card">
                <div class="card-title">æ—¥å ±æå‡º</div>
                <div class="stat-value" id="ua-daily">â€”</div>
            </div>
            <div class="card">
                <div class="card-title">æœªå®Œäº†ã‚¿ã‚¹ã‚¯</div>
                <div class="stat-value" id="ua-tasks">â€”</div>
            </div>
            <div class="card">
                <div class="card-title">è³ªå•</div>
                <div class="stat-value" id="ua-questions">â€”</div>
            </div>
        </div>

        <div class="card" style="margin-bottom:16px">
            <div class="section-title">ãƒ¡ãƒ³ãƒãƒ¼åˆ¥çŠ¶æ³</div>
            <table>
                <thead>
                    <tr>
                        <th>åå‰</th>
                        <th>å½¹å‰²</th>
                        <th>æ—¥å ±</th>
                        <th>ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯</th>
                        <th>è³ªå•</th>
                        <th>æœ€çµ‚æ›´æ–°</th>
                    </tr>
                </thead>
                <tbody id="table-unit-a-members"></tbody>
            </table>
        </div>

        <div class="grid grid-2">
            <div class="card">
                <div class="section-title">ä»Šæ—¥ã®å®Œäº†ã‚¿ã‚¹ã‚¯</div>
                <div id="ua-completed-tasks"></div>
            </div>
            <div class="card">
                <div class="section-title">èª²é¡Œãƒ»ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</div>
                <div id="ua-escalations"></div>
            </div>
        </div>
    </div>

    <!-- ===== é€šä¿¡çŠ¶æ³ ===== -->
    <div class="page" id="page-comm">
        <div class="section-title">é€šä¿¡çŠ¶æ³ï¼ˆå…¨ãƒ¦ãƒ‹ãƒƒãƒˆï¼‰</div>

        <div class="grid grid-4" style="margin-bottom:24px">
            <div class="card">
                <div class="card-title">è³ªå•ï¼ˆå›ç­”å¾…ã¡ï¼‰</div>
                <div class="stat-value" id="comm-q-open">â€”</div>
            </div>
            <div class="card">
                <div class="card-title">è³ªå•ï¼ˆå›ç­”æ¸ˆã¿ï¼‰</div>
                <div class="stat-value" id="comm-q-answered">â€”</div>
            </div>
            <div class="card">
                <div class="card-title">æŒ‡ç¤ºï¼ˆé…ä¿¡æ¸ˆã¿ï¼‰</div>
                <div class="stat-value" id="comm-d-sent">â€”</div>
            </div>
            <div class="card">
                <div class="card-title">ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</div>
                <div class="stat-value" id="comm-escalation">â€”</div>
            </div>
        </div>

        <div class="card">
            <div class="section-title">é€šä¿¡ãƒ­ã‚°</div>
            <table>
                <thead>
                    <tr>
                        <th>æ—¥æ™‚</th>
                        <th>ç¨®åˆ¥</th>
                        <th>é€ä¿¡è€…</th>
                        <th>å®›å…ˆ</th>
                        <th>ä»¶å</th>
                        <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                    </tr>
                </thead>
                <tbody id="table-comm-log"></tbody>
            </table>
        </div>
    </div>

    <!-- ===== ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ ===== -->
    <div class="page" id="page-discussions">
        <div class="section-title">ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³</div>

        <div class="grid grid-4" style="margin-bottom:24px">
            <div class="card">
                <div class="card-title">é€²è¡Œä¸­</div>
                <div class="stat-value" id="disc-active">â€”</div>
            </div>
            <div class="card">
                <div class="card-title">å›ç­”å¾…ã¡</div>
                <div class="stat-value" id="disc-pending">â€”</div>
            </div>
            <div class="card">
                <div class="card-title">åˆæ„æ¸ˆã¿</div>
                <div class="stat-value" id="disc-agreed">â€”</div>
            </div>
            <div class="card">
                <div class="card-title">ç·ä»¶æ•°</div>
                <div class="stat-value" id="disc-total">â€”</div>
            </div>
        </div>

        <div class="card" style="margin-bottom:16px">
            <div class="section-title">æœ€è¿‘ã®ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³</div>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>ä»¶å</th>
                        <th>ç™ºä¿¡è€…</th>
                        <th>å®›å…ˆ</th>
                        <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                        <th>æ—¥ä»˜</th>
                    </tr>
                </thead>
                <tbody id="table-discussions"></tbody>
            </table>
        </div>

        <div class="card">
            <div class="section-title">æ—§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆè©³ç´°ãƒ“ãƒ¥ãƒ¼ï¼‰</div>
            <div style="padding:16px;text-align:center">
                <a href="old-hq.html" style="color:var(--accent);font-size:14px;text-decoration:underline" target="_blank">
                    Torrent HQ â€” Discussion Dashboard ã‚’é–‹ã
                </a>
                <div style="color:var(--text-muted);font-size:12px;margin-top:8px">
                    å‰ç”°ã•ã‚“ã¨ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã®å…¨æ–‡è¡¨ç¤ºï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ä¿è­·ï¼‰
                </div>
            </div>
        </div>
    </div>

    <!-- ===== ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ ===== -->
    <div class="page" id="page-timeline">
        <div class="section-title">ä»Šæ—¥ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³</div>
        <div id="timeline-content"></div>
    </div>

</div>

<script>
// ============================================================
// ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ãƒ¤ãƒ¼ â€” unit-hub / executive-hub ã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ³¨å…¥
// AIå‚è¬€ãŒå®šæœŸçš„ã«ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã™ã‚‹
// ============================================================

const DATA = {
    lastUpdated: new Date().toISOString(),

    organization: {
        name: "ITJ",
        executive: "æˆ¸ç”°"
    },

    units: [
        {
            id: "a",
            name: "ãƒ¦ãƒ‹ãƒƒãƒˆAï¼ˆé–‹ç™ºï¼‰",
            repo: "unit-hub-a",
            leader: { id: "yoshida", name: "å‰ç”°æ˜­å¼˜" },
            focus: "ãƒˆãƒ¬ãƒ³ãƒˆDBç¾¤é–‹ç™º",
            status: "active",
            members: [
                {
                    id: "yoshida",
                    name: "å‰ç”°æ˜­å¼˜",
                    role: "ãƒªãƒ¼ãƒ€ãƒ¼ / ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢",
                    dailyReport: { submitted: "2026-02-19 09:15" },
                    tasksToday: { total: 4, completed: 2 },
                    questions: 1,
                    lastActivity: "09:15"
                },
                {
                    id: "tanaka",
                    name: "ç”°ä¸­å¤ªéƒ",
                    role: "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰",
                    dailyReport: { submitted: "2026-02-19 09:30" },
                    tasksToday: { total: 3, completed: 1 },
                    questions: 0,
                    lastActivity: "09:30"
                },
                {
                    id: "suzuki",
                    name: "éˆ´æœ¨èŠ±å­",
                    role: "ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰",
                    dailyReport: null,
                    tasksToday: { total: 2, completed: 0 },
                    questions: 2,
                    lastActivity: "æ˜¨æ—¥ 18:20"
                }
            ]
        },
        {
            id: "b",
            name: "ãƒ¦ãƒ‹ãƒƒãƒˆBï¼ˆå–¶æ¥­ï¼‰",
            repo: "unit-hub-b",
            leader: { id: "sato", name: "ä½è—¤ä¸€éƒ" },
            focus: "æ–°è¦é¡§å®¢é–‹æ‹“ãƒ»ææ¡ˆ",
            status: "active",
            members: [
                {
                    id: "sato",
                    name: "ä½è—¤ä¸€éƒ",
                    role: "ãƒªãƒ¼ãƒ€ãƒ¼ / å–¶æ¥­",
                    dailyReport: { submitted: "2026-02-19 08:50" },
                    tasksToday: { total: 5, completed: 3 },
                    questions: 0,
                    lastActivity: "08:50"
                },
                {
                    id: "yamada",
                    name: "å±±ç”°æ¬¡éƒ",
                    role: "å–¶æ¥­",
                    dailyReport: { submitted: "2026-02-19 09:10" },
                    tasksToday: { total: 3, completed: 2 },
                    questions: 1,
                    lastActivity: "09:10"
                }
            ]
        },
        {
            id: "c",
            name: "ãƒ¦ãƒ‹ãƒƒãƒˆCï¼ˆCSï¼‰",
            repo: "unit-hub-c",
            leader: { id: "kimura", name: "æœ¨æ‘ä¸‰éƒ" },
            focus: "é¡§å®¢ã‚µãƒãƒ¼ãƒˆãƒ»å•ã„åˆã‚ã›å¯¾å¿œ",
            status: "planned",
            members: []
        }
    ],

    communication: {
        questions: [
            {
                datetime: "2026-02-19 09:20",
                from: "å‰ç”°æ˜­å¼˜",
                to: "æˆ¸ç”°",
                title: "ãƒˆãƒ¬ãƒ³ãƒˆDB: ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆã®ç¢ºèª",
                status: "å›ç­”å¾…ã¡",
                unit: "unit-a"
            },
            {
                datetime: "2026-02-19 08:55",
                from: "éˆ´æœ¨èŠ±å­",
                to: "å‰ç”°æ˜­å¼˜",
                title: "APIèªè¨¼ãƒ•ãƒ­ãƒ¼ã®è³ªå•",
                status: "å›ç­”å¾…ã¡",
                unit: "unit-a"
            },
            {
                datetime: "2026-02-19 09:12",
                from: "å±±ç”°æ¬¡éƒ",
                to: "ä½è—¤ä¸€éƒ",
                title: "è¦‹ç©æ›¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç¢ºèª",
                status: "å›ç­”å¾…ã¡",
                unit: "unit-b"
            },
            {
                datetime: "2026-02-18 17:00",
                from: "ç”°ä¸­å¤ªéƒ",
                to: "å‰ç”°æ˜­å¼˜",
                title: "UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰",
                status: "å›ç­”æ¸ˆã¿",
                unit: "unit-a"
            }
        ],
        answers: [
            {
                datetime: "2026-02-18 17:30",
                from: "å‰ç”°æ˜­å¼˜",
                to: "ç”°ä¸­å¤ªéƒ",
                title: "Re: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰",
                status: "å›ç­”æ¸ˆã¿",
                unit: "unit-a"
            }
        ],
        directives: [
            {
                datetime: "2026-02-19 08:00",
                from: "æˆ¸ç”°",
                to: "å…¨ãƒ¦ãƒ‹ãƒƒãƒˆ",
                title: "ä»Šé€±ã®å„ªå…ˆã‚¿ã‚¹ã‚¯ã«ã¤ã„ã¦",
                status: "é…ä¿¡æ¸ˆã¿",
                unit: "broadcast"
            },
            {
                datetime: "2026-02-18 10:00",
                from: "æˆ¸ç”°",
                to: "ãƒ¦ãƒ‹ãƒƒãƒˆA",
                title: "ãƒˆãƒ¬ãƒ³ãƒˆDB: Phase 1 ã®ã‚¹ã‚³ãƒ¼ãƒ—ç¢ºèª",
                status: "å®Œäº†",
                unit: "unit-a"
            }
        ],
        escalations: [
            {
                datetime: "2026-02-19 09:25",
                from: "å‰ç”°æ˜­å¼˜",
                to: "æˆ¸ç”°",
                title: "éˆ´æœ¨ã•ã‚“ã®æ—¥å ±æœªæå‡ºï¼ˆ2æ—¥é€£ç¶šï¼‰",
                status: "æœªå¯¾å¿œ",
                unit: "unit-a"
            }
        ],
        broadcast: []
    },

    discussions: [
        {
            id: "260219-009",
            title: "æˆ¸ç”°å´ã‚¹ã‚­ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®å…±æœ‰",
            from: "æˆ¸ç”°",
            to: "å‰ç”°æ˜­å¼˜",
            status: "å›ç­”å¾…ã¡",
            date: "2026-02-19",
            unit: "unit-a"
        },
        {
            id: "260219-008",
            title: "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚¹ã‚­ãƒ«æ•´å‚™ã®ãŠé¡˜ã„",
            from: "æˆ¸ç”°",
            to: "å‰ç”°æ˜­å¼˜",
            status: "å›ç­”å¾…ã¡",
            date: "2026-02-19",
            unit: "unit-a"
        },
        {
            id: "hdb-admin",
            title: "HDB 1æ—¥é™å®šç®¡ç†æ¨©é™ã®ææ¡ˆ",
            from: "å‰ç”°æ˜­å¼˜",
            to: "ä»Šæ³‰",
            status: "å›ç­”æ¸ˆã¿",
            date: "2026-02-19",
            unit: "unit-a"
        },
        {
            id: "agent-start",
            title: "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåŒå£«ã®ã‚„ã‚Šå–ã‚Šã®å§‹ã‚æ–¹",
            from: "æˆ¸ç”°",
            to: "å‰ç”°æ˜­å¼˜",
            status: "å®Œäº†",
            date: "2026-02-18",
            unit: "unit-a"
        },
        {
            id: "agree-realtime",
            title: "HDB ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åå¯„ã›ï¼ˆé‡è¤‡æ’é™¤ï¼‰",
            from: "â€”",
            to: "â€”",
            status: "åˆæ„",
            date: "2026-02-18",
            unit: "unit-a"
        },
        {
            id: "agree-techstack",
            title: "æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ãƒ»æ–¹é‡",
            from: "â€”",
            to: "â€”",
            status: "åˆæ„",
            date: "2026-02-17",
            unit: "unit-a"
        },
        {
            id: "gmail-impl",
            title: "Gmail é€šçŸ¥ãƒ»é€ä¿¡æ©Ÿèƒ½ã®å®Ÿè£…ä¾é ¼",
            from: "æˆ¸ç”°",
            to: "å‰ç”°æ˜­å¼˜",
            status: "é€²è¡Œä¸­",
            date: "2026-02-18",
            unit: "unit-a"
        },
        {
            id: "top-menu",
            title: "ãƒˆãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆçµ±ä¸€ãƒãƒ¼ã‚¿ãƒ«ï¼‰ã®ææ¡ˆ",
            from: "æˆ¸ç”°",
            to: "å‰ç”°æ˜­å¼˜",
            status: "é€²è¡Œä¸­",
            date: "2026-02-17",
            unit: "unit-a"
        },
        {
            id: "torrent-db",
            title: "ãƒˆãƒ¬ãƒ³ãƒˆDBç¾¤ã®ç¾çŠ¶ç¢ºèªã¨ææ¡ˆ",
            from: "æˆ¸ç”°",
            to: "å‰ç”°æ˜­å¼˜",
            status: "é€²è¡Œä¸­",
            date: "2026-02-16",
            unit: "unit-a"
        }
    ],

    timeline: [
        { time: "09:30", content: "ç”°ä¸­å¤ªéƒãŒæ—¥å ±ã‚’æå‡º", unit: "unit-a" },
        { time: "09:25", content: "ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: éˆ´æœ¨ã•ã‚“ã®æ—¥å ±æœªæå‡ºï¼ˆ2æ—¥é€£ç¶šï¼‰", unit: "unit-a" },
        { time: "09:20", content: "å‰ç”°æ˜­å¼˜ã‹ã‚‰è³ªå•: ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆã®ç¢ºèª", unit: "unit-a" },
        { time: "09:15", content: "å‰ç”°æ˜­å¼˜ãŒæ—¥å ±ã‚’æå‡º", unit: "unit-a" },
        { time: "09:12", content: "å±±ç”°æ¬¡éƒã‹ã‚‰è³ªå•: è¦‹ç©æ›¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ", unit: "unit-b" },
        { time: "09:10", content: "å±±ç”°æ¬¡éƒãŒæ—¥å ±ã‚’æå‡º", unit: "unit-b" },
        { time: "08:55", content: "éˆ´æœ¨èŠ±å­ã‹ã‚‰è³ªå•: APIèªè¨¼ãƒ•ãƒ­ãƒ¼", unit: "unit-a" },
        { time: "08:50", content: "ä½è—¤ä¸€éƒãŒæ—¥å ±ã‚’æå‡º", unit: "unit-b" },
        { time: "08:00", content: "æˆ¸ç”°ãŒå…¨è»é€šé”: ä»Šé€±ã®å„ªå…ˆã‚¿ã‚¹ã‚¯ã«ã¤ã„ã¦", unit: "å…¨ä½“" }
    ]
};

// ============================================================
// ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³
// ============================================================

function init() {
    document.getElementById('header-date').textContent = formatDate(new Date());
    renderOverview();
    renderUnits();
    renderUnitA();
    renderComm();
    renderDiscussions();
    renderTimeline();
    initNav();
}

function formatDate(d) {
    const days = ['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'];
    return `${d.getFullYear()}/${String(d.getMonth()+1).padStart(2,'0')}/${String(d.getDate()).padStart(2,'0')}ï¼ˆ${days[d.getDay()]}ï¼‰`;
}

// --- å…¨ä½“æ¦‚æ³ ---

function renderOverview() {
    const units = DATA.units.filter(u => u.status === 'active');
    const allMembers = units.flatMap(u => u.members);
    const totalMembers = allMembers.length;
    const dailySubmitted = allMembers.filter(m => m.dailyReport).length;
    const dailyRate = totalMembers > 0 ? Math.round(dailySubmitted / totalMembers * 100) : 0;
    const openQuestions = DATA.communication.questions.filter(q => q.status === 'å›ç­”å¾…ã¡').length;
    const pendingDirectives = DATA.communication.directives.filter(d => d.status !== 'å®Œäº†').length;

    document.getElementById('stat-total-members').textContent = totalMembers;
    document.getElementById('stat-total-units').textContent = `${units.length} ãƒ¦ãƒ‹ãƒƒãƒˆ`;
    document.getElementById('stat-daily-rate').textContent = dailyRate + '%';
    document.getElementById('bar-daily').style.width = dailyRate + '%';
    document.getElementById('bar-daily').style.background = dailyRate >= 80 ? 'var(--green)' : dailyRate >= 50 ? 'var(--yellow)' : 'var(--red)';
    document.getElementById('stat-open-questions').textContent = openQuestions;
    document.getElementById('stat-pending-directives').textContent = pendingDirectives;

    // ã‚¢ãƒ©ãƒ¼ãƒˆ
    const alerts = [];
    const noReport = allMembers.filter(m => !m.dailyReport);
    if (noReport.length > 0) {
        alerts.push(`æ—¥å ±æœªæå‡º: ${noReport.map(m=>m.name).join('ã€')}`);
    }
    if (openQuestions > 0) {
        alerts.push(`æœªå›ç­”ã®è³ªå•ãŒ ${openQuestions} ä»¶ã‚ã‚Šã¾ã™`);
    }
    const escalations = DATA.communication.escalations.filter(e => e.status === 'æœªå¯¾å¿œ');
    if (escalations.length > 0) {
        alerts.push(`ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ${escalations.length} ä»¶ãŒæœªå¯¾å¿œã§ã™`);
    }

    const alertsEl = document.getElementById('alerts');
    alertsEl.innerHTML = alerts.map(a =>
        `<div class="alert-banner">âš ï¸ ${a}</div>`
    ).join('');

    // ãƒ¦ãƒ‹ãƒƒãƒˆä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«
    const tbody = document.getElementById('table-units-overview');
    tbody.innerHTML = units.map(u => {
        const members = u.members.length;
        const reported = u.members.filter(m => m.dailyReport).length;
        const rate = members > 0 ? Math.round(reported / members * 100) : 0;
        const statusClass = rate === 100 ? 'status-ok' : rate >= 50 ? 'status-warn' : 'status-error';
        return `<tr>
            <td><strong>${u.name}</strong></td>
            <td>${u.leader.name}</td>
            <td>${members}</td>
            <td>${reported}/${members} (${rate}%)</td>
            <td><span class="status-dot ${statusClass}"></span>${rate === 100 ? 'è‰¯å¥½' : rate >= 50 ? 'ä¸€éƒ¨æœªæå‡º' : 'è¦ç¢ºèª'}</td>
        </tr>`;
    }).join('');

    // æœ€æ–°ã®é€šä¿¡
    const allComm = [
        ...DATA.communication.questions.map(q => ({...q, type: 'è³ªå•', badge: 'badge-blue'})),
        ...DATA.communication.answers.map(a => ({...a, type: 'å›ç­”', badge: 'badge-green'})),
        ...DATA.communication.directives.map(d => ({...d, type: 'æŒ‡ç¤º', badge: 'badge-purple'})),
        ...DATA.communication.escalations.map(e => ({...e, type: 'ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³', badge: 'badge-red'})),
    ].sort((a,b) => (b.datetime||'').localeCompare(a.datetime||'')).slice(0, 5);

    const commEl = document.getElementById('recent-comm');
    if (allComm.length === 0) {
        commEl.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ğŸ“­</div>é€šä¿¡ãªã—</div>';
    } else {
        commEl.innerHTML = allComm.map(c =>
            `<div style="padding:8px 0;border-bottom:1px solid var(--border)">
                <span class="badge ${c.badge}">${c.type}</span>
                <strong style="margin-left:8px">${c.title || '(ç„¡é¡Œ)'}</strong>
                <div style="font-size:12px;color:var(--text-muted);margin-top:2px">${c.from || ''} â†’ ${c.to || ''} | ${c.datetime || ''}</div>
            </div>`
        ).join('');
    }
}

// --- ãƒ¦ãƒ‹ãƒƒãƒˆä¸€è¦§ ---

function renderUnits() {
    const el = document.getElementById('unit-cards');
    el.innerHTML = DATA.units.map(u => {
        const members = u.members.length;
        const reported = u.members.filter(m => m.dailyReport).length;
        const statusClass = u.status === 'active' ? (reported === members ? 'status-ok' : 'status-warn') : 'status-inactive';
        const statusText = u.status === 'active' ? 'ç¨¼åƒä¸­' : 'è¨ˆç”»ä¸­';
        return `<div class="card unit-card" onclick="showUnitTab('${u.id}')">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                <strong style="font-size:16px">${u.name}</strong>
                <span class="badge ${u.status === 'active' ? 'badge-green' : 'badge-yellow'}">${statusText}</span>
            </div>
            <div style="color:var(--text-muted);font-size:13px;margin-bottom:12px">${u.focus}</div>
            <div style="display:flex;gap:24px;font-size:14px">
                <div><span style="color:var(--text-muted)">ãƒªãƒ¼ãƒ€ãƒ¼:</span> ${u.leader.name || 'æœªå®š'}</div>
                <div><span style="color:var(--text-muted)">äººæ•°:</span> ${members}/7</div>
                <div><span style="color:var(--text-muted)">æ—¥å ±:</span> <span class="status-dot ${statusClass}"></span>${reported}/${members}</div>
            </div>
            <div class="progress-bar" style="margin-top:12px">
                <div class="progress-fill" style="width:${Math.round(members/7*100)}%;background:var(--accent)"></div>
            </div>
            <div style="font-size:11px;color:var(--text-muted);margin-top:4px">å®šå“¡: ${members}/7</div>
        </div>`;
    }).join('');
}

// --- ãƒ¦ãƒ‹ãƒƒãƒˆAè©³ç´° ---

function renderUnitA() {
    const unit = DATA.units.find(u => u.id === 'a');
    if (!unit) return;

    const members = unit.members;
    const reported = members.filter(m => m.dailyReport).length;
    const totalTasks = members.reduce((s,m) => s + m.tasksToday.total, 0);
    const totalQuestions = members.reduce((s,m) => s + m.questions, 0);

    document.getElementById('ua-members').textContent = members.length;
    document.getElementById('ua-daily').textContent = `${reported}/${members.length}`;
    document.getElementById('ua-tasks').textContent = totalTasks;
    document.getElementById('ua-questions').textContent = totalQuestions;

    const tbody = document.getElementById('table-unit-a-members');
    tbody.innerHTML = members.map(m => {
        const dailyBadge = m.dailyReport
            ? '<span class="badge badge-green">æå‡ºæ¸ˆ</span>'
            : '<span class="badge badge-red">æœªæå‡º</span>';
        return `<tr>
            <td><strong>${m.name}</strong></td>
            <td>${m.role}</td>
            <td>${dailyBadge}</td>
            <td>${m.tasksToday.completed}/${m.tasksToday.total}</td>
            <td>${m.questions > 0 ? `<span class="badge badge-yellow">${m.questions}ä»¶</span>` : 'â€”'}</td>
            <td style="color:var(--text-muted);font-size:12px">${m.lastActivity}</td>
        </tr>`;
    }).join('');

    document.getElementById('ua-completed-tasks').innerHTML =
        '<div class="empty-state" style="padding:24px"><div class="empty-state-icon">ğŸ“‹</div>ãƒ‡ãƒ¼ã‚¿ã¯æ—¥å ±ã‹ã‚‰è‡ªå‹•å–å¾—ã•ã‚Œã¾ã™</div>';
    document.getElementById('ua-escalations').innerHTML =
        '<div class="empty-state" style="padding:24px"><div class="empty-state-icon">âœ…</div>ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãªã—</div>';
}

// --- é€šä¿¡çŠ¶æ³ ---

function renderComm() {
    const q = DATA.communication.questions;
    const a = DATA.communication.answers;
    const d = DATA.communication.directives;
    const e = DATA.communication.escalations;

    document.getElementById('comm-q-open').textContent = q.filter(x => x.status === 'å›ç­”å¾…ã¡').length;
    document.getElementById('comm-q-answered').textContent = q.filter(x => x.status === 'å›ç­”æ¸ˆã¿').length;
    document.getElementById('comm-d-sent').textContent = d.length;
    document.getElementById('comm-escalation').textContent = e.length;

    const allComm = [
        ...q.map(x => ({...x, type: 'è³ªå•', badge: 'badge-blue'})),
        ...a.map(x => ({...x, type: 'å›ç­”', badge: 'badge-green'})),
        ...d.map(x => ({...x, type: 'æŒ‡ç¤º', badge: 'badge-purple'})),
        ...e.map(x => ({...x, type: 'ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³', badge: 'badge-red'})),
        ...DATA.communication.broadcast.map(x => ({...x, type: 'å…¨è»é€šé”', badge: 'badge-yellow'})),
    ].sort((a,b) => (b.datetime||'').localeCompare(a.datetime||''));

    const tbody = document.getElementById('table-comm-log');
    if (allComm.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6" style="text-align:center;color:var(--text-muted);padding:24px">é€šä¿¡ãªã—</td></tr>';
    } else {
        tbody.innerHTML = allComm.map(c => {
            const statusBadge = c.status === 'å›ç­”å¾…ã¡' ? 'badge-yellow' : c.status === 'å›ç­”æ¸ˆã¿' ? 'badge-green' : 'badge-blue';
            return `<tr>
                <td style="font-size:12px;color:var(--text-muted)">${c.datetime || ''}</td>
                <td><span class="badge ${c.badge}">${c.type}</span></td>
                <td>${c.from || ''}</td>
                <td>${c.to || ''}</td>
                <td>${c.title || ''}</td>
                <td><span class="badge ${statusBadge}">${c.status || ''}</span></td>
            </tr>`;
        }).join('');
    }
}

// --- ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ ---

function renderDiscussions() {
    const disc = DATA.discussions;
    const active = disc.filter(d => d.status === 'é€²è¡Œä¸­').length;
    const pending = disc.filter(d => d.status === 'å›ç­”å¾…ã¡').length;
    const agreed = disc.filter(d => d.status === 'åˆæ„').length;

    document.getElementById('disc-active').textContent = active;
    document.getElementById('disc-pending').textContent = pending;
    document.getElementById('disc-agreed').textContent = agreed;
    document.getElementById('disc-total').textContent = disc.length;

    const tbody = document.getElementById('table-discussions');
    tbody.innerHTML = disc.map(d => {
        const statusMap = {
            'å›ç­”å¾…ã¡': 'badge-yellow',
            'å›ç­”æ¸ˆã¿': 'badge-green',
            'é€²è¡Œä¸­': 'badge-blue',
            'åˆæ„': 'badge-purple',
            'å®Œäº†': 'badge-green'
        };
        return `<tr>
            <td style="font-family:monospace;font-size:12px;color:var(--text-muted)">${d.id}</td>
            <td><strong>${d.title}</strong></td>
            <td>${d.from}</td>
            <td>${d.to}</td>
            <td><span class="badge ${statusMap[d.status] || 'badge-blue'}">${d.status}</span></td>
            <td style="font-size:12px;color:var(--text-muted)">${d.date}</td>
        </tr>`;
    }).join('');
}

// --- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ ---

function renderTimeline() {
    const el = document.getElementById('timeline-content');
    if (DATA.timeline.length === 0) {
        el.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ğŸ•</div>ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¯æ´»å‹•é–‹å§‹å¾Œã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>';
        return;
    }
    el.innerHTML = DATA.timeline.map(t =>
        `<div class="timeline-item">
            <div class="timeline-time">${t.time}</div>
            <div class="timeline-content">${t.content} <span class="tag">${t.unit || ''}</span></div>
        </div>`
    ).join('');
}

// --- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ ---

function initNav() {
    document.querySelectorAll('.nav-tab').forEach(tab => {
        tab.addEventListener('click', () => {
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            tab.classList.add('active');
            document.getElementById('page-' + tab.dataset.page).classList.add('active');
        });
    });
}

function showUnitTab(unitId) {
    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    const tab = document.querySelector(`.nav-tab[data-page="unit-${unitId}"]`);
    if (tab) {
        tab.classList.add('active');
        document.getElementById('page-unit-' + unitId).classList.add('active');
    }
}

// --- ãƒ¦ãƒ‹ãƒƒãƒˆè¿½åŠ ç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼ ---
// æ–°ã—ã„ãƒ¦ãƒ‹ãƒƒãƒˆãŒå¢—ãˆãŸå ´åˆã€DATAã®unitsã«è¿½åŠ ã—ã€
// ä»¥ä¸‹ã§ãƒŠãƒ“ã‚¿ãƒ–ã¨ãƒšãƒ¼ã‚¸ã‚’å‹•çš„ç”Ÿæˆã™ã‚‹

function addUnitTabAndPage(unit) {
    const nav = document.getElementById('nav');
    const tab = document.createElement('div');
    tab.className = 'nav-tab';
    tab.dataset.page = 'unit-' + unit.id;
    tab.textContent = unit.name;
    tab.addEventListener('click', () => {
        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById('page-unit-' + unit.id).classList.add('active');
    });
    nav.appendChild(tab);

    const container = document.querySelector('.container');
    const page = document.createElement('div');
    page.className = 'page';
    page.id = 'page-unit-' + unit.id;

    const members = unit.members;
    const reported = members.filter(m => m.dailyReport).length;

    page.innerHTML = `
        <div class="section-title">${unit.name}<span class="tag">unit-hub-${unit.id}</span></div>
        <div class="grid grid-4" style="margin-bottom:24px">
            <div class="card"><div class="card-title">ãƒ¡ãƒ³ãƒãƒ¼</div><div class="stat-value">${members.length}</div></div>
            <div class="card"><div class="card-title">æ—¥å ±æå‡º</div><div class="stat-value">${reported}/${members.length}</div></div>
            <div class="card"><div class="card-title">æœªå®Œäº†ã‚¿ã‚¹ã‚¯</div><div class="stat-value">${members.reduce((s,m) => s + m.tasksToday.total, 0)}</div></div>
            <div class="card"><div class="card-title">è³ªå•</div><div class="stat-value">${members.reduce((s,m) => s + m.questions, 0)}</div></div>
        </div>
        <div class="card">
            <div class="section-title">ãƒ¡ãƒ³ãƒãƒ¼åˆ¥çŠ¶æ³</div>
            <table>
                <thead><tr><th>åå‰</th><th>å½¹å‰²</th><th>æ—¥å ±</th><th>ã‚¿ã‚¹ã‚¯</th><th>è³ªå•</th><th>æœ€çµ‚æ›´æ–°</th></tr></thead>
                <tbody>${members.map(m => `<tr>
                    <td><strong>${m.name}</strong></td>
                    <td>${m.role}</td>
                    <td>${m.dailyReport ? '<span class="badge badge-green">æå‡ºæ¸ˆ</span>' : '<span class="badge badge-red">æœªæå‡º</span>'}</td>
                    <td>${m.tasksToday.completed}/${m.tasksToday.total}</td>
                    <td>${m.questions > 0 ? `<span class="badge badge-yellow">${m.questions}ä»¶</span>` : 'â€”'}</td>
                    <td style="color:var(--text-muted);font-size:12px">${m.lastActivity}</td>
                </tr>`).join('')}</tbody>
            </table>
        </div>
    `;
    container.appendChild(page);
}

// --- èµ·å‹• ---

document.addEventListener('DOMContentLoaded', () => {
    DATA.units.filter(u => u.id !== 'a').forEach(addUnitTabAndPage);
    init();
});
</script>

</body>
</html>
